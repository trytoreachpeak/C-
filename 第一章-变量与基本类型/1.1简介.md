---
time: “2021/11/12”
---
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [变量(Variable)和数据类型简介(Type)](#变量variable和数据类型简介type)
  - [一、变量](#一-变量)
    - [1.1 变量是什么?](#11-变量是什么)
    - [1.2 变量定义的基本形式](#12-变量定义的基本形式)
    - [1.3 变量的本质](#13-变量的本质)
    - [1.4 变量在程序运行时不占用内存](#14-变量在程序运行时不占用内存)
  - [二、数据类型](#二-数据类型)
    - [2.1 数据类型是什么?](#21-数据类型是什么)
    - [2.2 数据类型有哪些?](#22-数据类型有哪些)

<!-- /code_chunk_output -->

# 变量(Variable)和数据类型简介(Type)

## 一、变量

### 1.1 变量是什么?

>&emsp;&emsp;变量(variable)是编写程序过程中出现的名字,其提供可供程序操作的存储空间.C++中的每个变量都有其数据类型,不存在没有数据类型的变量.在其他语言中,对象这一词语仅仅指的是OO编程中的对象,而对于C++程序员来说,对象是指一块能存储数据并具有某种类型的**内存空间**.“变量”和“**对象**(Object))”一般可以互换使用.

### 1.2 变量定义的基本形式
&emsp;&emsp;类型说明符(type specifier)+变量名(,变量名...);

### 1.3 变量的本质
&emsp;&emsp;变量的本质是一个名字,但也仅仅只是一个名字.一个名字不能存储任何东西,他只是一个指向内存空间的代号罢了.
&emsp;&emsp;但是名字不能单独声明而是需要配合数据类型一起声明,因为数据类型决定了存储空间的分配,比如,该变量是分配在栈中还是堆中;struct的内存对齐等.
&emsp;&emsp;有的人把变量比做不同形状的容器,这种说法部分正确,但有缺陷,下面解释数据类型和变量时将会说到,不同形状指的是不同数据类型,但是变量并不是容器,他本质还是一个地址,所以他无法容纳任何东西,何况数组还可以越界,说明某些东西即使不在容器里,他也可以通过变量访问,这就说明这个例子用来比喻变量并不恰当.
&emsp;&emsp;实际上编译器是这么看待变量的.变量名实际上是一个符号地址[^1]，在对程序编译连接时由系统给每一个变量名分配一个内存地址。在程序中从变量中取值，实际上是通过变量名找到相应的内存地址，从其存储单元中读取数据。
&emsp;&emsp;变量名是给编译器看的，编译器根据变量是局部还是全局分配内存地址或栈空间，所谓的变量名在内存中不存在，操作时转换成地址数(或者叫地址码)存放在寄存器中了。编译器会将合法的变量名放到一个叫“符号表”的一个表中。每个符号对应一个地址。当你调用此变量时，就会根据此符号表找到对应的地址，然后进行操作。
&emsp;&emsp;除了变量名,程序中的其他名的情况也类似:比如指针名、数组名、函数名就是地址，它们分别表示指针所指向元素的地址、数组的首地址、函数的入口地址。
&emsp;&emsp;变量名虽然不直接表示地址，但可用取地址符号&来获得它所代表的变量的存放地址。因为在定义变量的同时会分配给它相应的空间。而指针变量呢，它本身也是一个变量名，只不过它标识的那块内存存放的是一个地址值。

### 1.4 变量在程序运行时不占用内存
&emsp;&emsp;从上面我们可知,变量的声明和定义必须配合数据类型一起.变量在定义之后,变量会获得一块内存空间,然而当我们对这个变量进行操作时,势必要根据变量的类型进行对应的操作,从这样来看,似乎变量和数据类型都要保存在内存中.
&emsp;&emsp;从然而并不是这样的,数据类型只是为了告诉编译器如何对变量进行操作,因此在编译之后,程序中并没有数据类型的信息,从这里可以看出,C++是静态数据类型语言,而像JAVA这种提供反射的程序,在运行时也可以知道变量的数据类型,因此是动态数据类型语言.
z
[^1]: 用符号标记的地址，访问时需要映射为实际内存单元的地址。

&emsp;&emsp;看下面这个例子你会有更清晰的理解.
```C++
int a;
//编译器分配4个字节内存,并命名该4个字节的空间名字为a(即变量名),
//当用到变量名a时,就是在使用那4个字节的内存空间.
a = 5;
//5是一个常数,在程序编译时存放在代码的常量区存放着它的值(就是5),
//当执行a=5时,程序将5这个常量拷贝到a所在的4个字节空间中,就完成了赋值操作.
```

这让人联想到了计算机组成原理中的内存寻址原理,计算机访问内存必定是需要内存地址的,因此变量名肯定会转化为指向某内存空间的地址,内存空间的地址替换变量名的过程发生在链接的过程中.

## 二、数据类型
### 2.1 数据类型是什么?
&emsp;&emsp;数据类型决定着变量所占内存空间的大小和布局方式、该空间能存储的值的范围,以及变量能参与的运算等等.

### 2.2 数据类型有哪些?
数据类型分为两种,分别为:
1. 基本内置类型(fundamental type)
2. 复合类型(compound type)

基本内置类型又分为:
1. 算术类型(arithmetic type)
   1. 整型
   2. 浮点型
2. 空类型(void)

复合类型:
1. 给定类型的对象数组；
2. 函数，具有给定类型的参数并返回 void 或给定类型的引用或对象；
3. 指向 cv void[^2]或给定类型的对象或函数（包括类的静态成员）的指针；
4. 对给定类型的对象或函数的引用。有两种类型的引用：
   1. 左值引用
   2. 右值引用
5. 包含一系列各种类型的对象、一组类型、枚举和用于操作这些对象的函数的类，以及对访问这些实体的一系列限制；
6. 联合，它们是能够在不同时间包含不同类型对象的类；
7. 枚举，包含一组命名常量值。每个不同的枚举构成不同的枚举类型；
8.  指向非静态类成员的指针，用于标识给定类的对象内的给定类型的成员。指向数据成员的指针和指向成员函数的指针统称为成员指针类型。

自定义数据类型
对于上述部分数据类型(包括类类型)都存在对应的常量.可以说常量是变量的一种特殊形式(这一说法并不完全对,有的常量确实是常量,但有些常量其实还是变量,具体在常量和常量表达式.md中讨论).

[^2]: 可能被const或者volatile修饰的void